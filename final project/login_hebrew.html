<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>   - 住 </title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Animation Screen -->
    <div id="animationScreen" class="animation-screen">
        <div class="chef-animation">
            <div class="chef-hat"></div>
            <div class="cooking-items">
                <span class="item item1"></span>
                <span class="item item2"></span>
                <span class="item item3"></span>
                <span class="item item4"></span>
            </div>
            <h1 class="welcome-text">专   !</h1>
        </div>
    </div>

    <!-- Login Container -->
    <div id="loginContainer" class="login-container" style="display: none;">
        <div class="login-box">
            <h1> 专   ! </h1>
            <p>转专  转 砖!</p>
            
            <form id="loginForm">
                <div class="input-group">
                    <label for="username"> 砖 砖转砖:</label>
                    <input type="text" id="username" name="username" required minlength="3" maxlength="20">
                    <span class="error" id="usernameError"></span>
                </div>
                
                <div class="input-group">
                    <label for="password"> 住住:</label>
                    <input type="password" id="password" name="password" required minlength="4">
                    <span class="error" id="passwordError"></span>
                </div>
                
                <button type="submit" class="login-btn"> 砖! </button>
                <button type="button" class="register-btn" onclick="showRegister()">砖祝 砖? 专砖! </button>
            </form>
            
            <!-- Registration Form -->
            <form id="registerForm" style="display: none;">
                <h2> 爪专 砖 砖祝 砖</h2>
                <div class="input-group">
                    <label for="newUsername"> 专 砖 砖转砖:</label>
                    <input type="text" id="newUsername" name="newUsername" required minlength="3" maxlength="20" pattern="[a-zA-Z\u0590-\u05FF]+">
                    <span class="error" id="newUsernameError"></span>
                    <small>3-20 转, 转转 注专转  转 </small>
                </div>
                
                <div class="input-group">
                    <label for="newPassword"> 专 住住:</label>
                    <input type="password" id="newPassword" name="newPassword" required minlength="4" maxlength="50">
                    <span class="error" id="newPasswordError"></span>
                    <small>驻转 4 转</small>
                </div>
                
                <button type="submit" class="login-btn">爪专 砖! </button>
                <button type="button" class="register-btn" onclick="showLogin()">专 转专转 </button>
            </form>
        </div>
    </div>

    <script>
        // Initialize default user if no users exist
        if (!localStorage.getItem('kidsKitchenUsers')) {
            const defaultUsers = {
                '砖祝': 'cook123'
            };
            localStorage.setItem('kidsKitchenUsers', JSON.stringify(defaultUsers));
        }

        // Login form
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            clearErrors();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            
            if (!validateLogin(username, password)) return;
            
            const users = JSON.parse(localStorage.getItem('kidsKitchenUsers'));
            
            if (users[username] && users[username] === password) {
                localStorage.setItem('currentUser', username);
                alert(' 专 , ' + username + '!  转 砖!');
                window.location.href = 'index_hebrew.html';
            } else {
                showError('passwordError', '砖 砖转砖  住住 砖!');
            }
        });

        // Registration form
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            clearErrors();
            
            const username = document.getElementById('newUsername').value.trim();
            const password = document.getElementById('newPassword').value;
            
            if (!validateRegistration(username, password)) return;
            
            const users = JSON.parse(localStorage.getItem('kidsKitchenUsers'));
            
            if (users[username]) {
                showError('newUsernameError', '砖 砖转砖 专 拽!');
                return;
            }
            
            users[username] = password;
            localStorage.setItem('kidsKitchenUsers', JSON.stringify(users));
            localStorage.setItem('currentUser', username);
            
            alert(' 专   , ' + username + '! 砖 爪专!');
            window.location.href = 'index_hebrew.html';
        });

        function showRegister() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        }

        function showLogin() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
            clearErrors();
        }

        function validateLogin(username, password) {
            let valid = true;
            
            if (username.length < 3) {
                showError('usernameError', '砖 砖转砖  转 驻转 3 转');
                valid = false;
            }
            
            if (password.length < 4) {
                showError('passwordError', '住住 转 转 驻转 4 转');
                valid = false;
            }
            
            return valid;
        }

        function validateRegistration(username, password) {
            let valid = true;
            
            if (username.length < 3 || username.length > 20) {
                showError('newUsernameError', '砖 砖转砖  转 3-20 转');
                valid = false;
            }
            
            if (!/^[a-zA-Z\u0590-\u05FF]+$/.test(username)) {
                showError('newUsernameError', '砖 砖转砖   专拽 转转 注专转  转');
                valid = false;
            }
            
            if (password.length < 4) {
                showError('newPasswordError', '住住 转 转 驻转 4 转');
                valid = false;
            }
            
            return valid;
        }

        function showError(elementId, message) {
            document.getElementById(elementId).textContent = message;
        }

        function clearErrors() {
            const errors = document.querySelectorAll('.error');
            errors.forEach(error => error.textContent = '');
        }

        // Animation on page load
        window.onload = function() {
            setTimeout(function() {
                document.getElementById('animationScreen').style.display = 'none';
                document.getElementById('loginContainer').style.display = 'flex';
                document.getElementById('loginContainer').classList.add('jump-in');
            }, 3000);
        };
    </script>
</body>
</html>